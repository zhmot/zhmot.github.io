function headerPosition(){$(window).scrollTop()>$("header").height()?$("header .navigation-bar").addClass("fixed-top").addClass(" shadow"):$("header .navigation-bar").removeClass("fixed-top").removeClass(" shadow")}$(function(){$("[data-load]").each(function(){$(this).load($(this).data("load"),function(){})}),window.prettyPrint&&prettyPrint(),$(".history-back").on("click",function(e){return e.preventDefault(),history.back(),!1})}),$(function(){if($("nav > .side-menu").length>0){var e=$("nav > .side-menu"),n=e.position().top;$(window).scroll(function(){e.css($(window).scrollTop()>n?{position:"fixed",top:"65px","z-index":"1000"}:{position:"static"})})}}),$(function(){setTimeout(function(){headerPosition()},100)}),$(window).scroll(function(){headerPosition()}),METRO_AUTO_REINIT=!0,function(){var e=this,n=e._,t=Array.prototype,r=Object.prototype,a=Function.prototype,o=t.push,i=t.slice,s=t.concat,c=r.toString,l=r.hasOwnProperty,u=Array.isArray,p=Object.keys,d=a.bind,h=function(e){return e instanceof h?e:this instanceof h?void(this._wrapped=e):new h(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):e._=h,h.VERSION="1.7.0";var f=function(e,n,t){if(void 0===n)return e;switch(null==t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,a){return e.call(n,t,r,a)};case 4:return function(t,r,a,o){return e.call(n,t,r,a,o)}}return function(){return e.apply(n,arguments)}};h.iteratee=function(e,n,t){return null==e?h.identity:h.isFunction(e)?f(e,n,t):h.isObject(e)?h.matches(e):h.property(e)},h.each=h.forEach=function(e,n,t){if(null==e)return e;n=f(n,t);var r,a=e.length;if(a===+a)for(r=0;a>r;r++)n(e[r],r,e);else{var o=h.keys(e);for(r=0,a=o.length;a>r;r++)n(e[o[r]],o[r],e)}return e},h.map=h.collect=function(e,n,t){if(null==e)return[];n=h.iteratee(n,t);for(var r,a=e.length!==+e.length&&h.keys(e),o=(a||e).length,i=Array(o),s=0;o>s;s++)r=a?a[s]:s,i[s]=n(e[r],r,e);return i};var g="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(e,n,t,r){null==e&&(e=[]),n=f(n,r,4);var a,o=e.length!==+e.length&&h.keys(e),i=(o||e).length,s=0;if(arguments.length<3){if(!i)throw new TypeError(g);t=e[o?o[s++]:s++]}for(;i>s;s++)a=o?o[s]:s,t=n(t,e[a],a,e);return t},h.reduceRight=h.foldr=function(e,n,t,r){null==e&&(e=[]),n=f(n,r,4);var a,o=e.length!==+e.length&&h.keys(e),i=(o||e).length;if(arguments.length<3){if(!i)throw new TypeError(g);t=e[o?o[--i]:--i]}for(;i--;)a=o?o[i]:i,t=n(t,e[a],a,e);return t},h.find=h.detect=function(e,n,t){var r;return n=h.iteratee(n,t),h.some(e,function(e,t,a){return n(e,t,a)?(r=e,!0):void 0}),r},h.filter=h.select=function(e,n,t){var r=[];return null==e?r:(n=h.iteratee(n,t),h.each(e,function(e,t,a){n(e,t,a)&&r.push(e)}),r)},h.reject=function(e,n,t){return h.filter(e,h.negate(h.iteratee(n)),t)},h.every=h.all=function(e,n,t){if(null==e)return!0;n=h.iteratee(n,t);var r,a,o=e.length!==+e.length&&h.keys(e),i=(o||e).length;for(r=0;i>r;r++)if(a=o?o[r]:r,!n(e[a],a,e))return!1;return!0},h.some=h.any=function(e,n,t){if(null==e)return!1;n=h.iteratee(n,t);var r,a,o=e.length!==+e.length&&h.keys(e),i=(o||e).length;for(r=0;i>r;r++)if(a=o?o[r]:r,n(e[a],a,e))return!0;return!1},h.contains=h.include=function(e,n){return null==e?!1:(e.length!==+e.length&&(e=h.values(e)),h.indexOf(e,n)>=0)},h.invoke=function(e,n){var t=i.call(arguments,2),r=h.isFunction(n);return h.map(e,function(e){return(r?n:e[n]).apply(e,t)})},h.pluck=function(e,n){return h.map(e,h.property(n))},h.where=function(e,n){return h.filter(e,h.matches(n))},h.findWhere=function(e,n){return h.find(e,h.matches(n))},h.max=function(e,n,t){var r,a,o=-1/0,i=-1/0;if(null==n&&null!=e){e=e.length===+e.length?e:h.values(e);for(var s=0,c=e.length;c>s;s++)r=e[s],r>o&&(o=r)}else n=h.iteratee(n,t),h.each(e,function(e,t,r){a=n(e,t,r),(a>i||a===-1/0&&o===-1/0)&&(o=e,i=a)});return o},h.min=function(e,n,t){var r,a,o=1/0,i=1/0;if(null==n&&null!=e){e=e.length===+e.length?e:h.values(e);for(var s=0,c=e.length;c>s;s++)r=e[s],o>r&&(o=r)}else n=h.iteratee(n,t),h.each(e,function(e,t,r){a=n(e,t,r),(i>a||1/0===a&&1/0===o)&&(o=e,i=a)});return o},h.shuffle=function(e){for(var n,t=e&&e.length===+e.length?e:h.values(e),r=t.length,a=Array(r),o=0;r>o;o++)n=h.random(0,o),n!==o&&(a[o]=a[n]),a[n]=t[o];return a},h.sample=function(e,n,t){return null==n||t?(e.length!==+e.length&&(e=h.values(e)),e[h.random(e.length-1)]):h.shuffle(e).slice(0,Math.max(0,n))},h.sortBy=function(e,n,t){return n=h.iteratee(n,t),h.pluck(h.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(r>t||void 0===r)return-1}return e.index-n.index}),"value")};var v=function(e){return function(n,t,r){var a={};return t=h.iteratee(t,r),h.each(n,function(r,o){var i=t(r,o,n);e(a,r,i)}),a}};h.groupBy=v(function(e,n,t){h.has(e,t)?e[t].push(n):e[t]=[n]}),h.indexBy=v(function(e,n,t){e[t]=n}),h.countBy=v(function(e,n,t){h.has(e,t)?e[t]++:e[t]=1}),h.sortedIndex=function(e,n,t,r){t=h.iteratee(t,r,1);for(var a=t(n),o=0,i=e.length;i>o;){var s=o+i>>>1;t(e[s])<a?o=s+1:i=s}return o},h.toArray=function(e){return e?h.isArray(e)?i.call(e):e.length===+e.length?h.map(e,h.identity):h.values(e):[]},h.size=function(e){return null==e?0:e.length===+e.length?e.length:h.keys(e).length},h.partition=function(e,n,t){n=h.iteratee(n,t);var r=[],a=[];return h.each(e,function(e,t,o){(n(e,t,o)?r:a).push(e)}),[r,a]},h.first=h.head=h.take=function(e,n,t){return null==e?void 0:null==n||t?e[0]:h.initial(e,e.length-n)},h.initial=function(e,n,t){return i.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},h.last=function(e,n,t){return null==e?void 0:null==n||t?e[e.length-1]:h.rest(e,Math.max(0,e.length-n))},h.rest=h.tail=h.drop=function(e,n,t){return i.call(e,null==n||t?1:n)},h.compact=function(e){return h.filter(e,h.identity)};var m=function(e,n,t,r){if(n&&h.every(e,h.isArray))return s.apply(r,e);for(var a=0,i=e.length;i>a;a++){var c=e[a];h.isArray(c)||h.isArguments(c)?n?o.apply(r,c):m(c,n,t,r):t||r.push(c)}return r};h.flatten=function(e,n){return m(e,n,!1,[])},h.without=function(e){return h.difference(e,i.call(arguments,1))},h.uniq=h.unique=function(e,n,t,r){if(null==e)return[];h.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=h.iteratee(t,r));for(var a=[],o=[],i=0,s=e.length;s>i;i++){var c=e[i];if(n)i&&o===c||a.push(c),o=c;else if(t){var l=t(c,i,e);h.indexOf(o,l)<0&&(o.push(l),a.push(c))}else h.indexOf(a,c)<0&&a.push(c)}return a},h.union=function(){return h.uniq(m(arguments,!0,!0,[]))},h.intersection=function(e){if(null==e)return[];for(var n=[],t=arguments.length,r=0,a=e.length;a>r;r++){var o=e[r];if(!h.contains(n,o)){for(var i=1;t>i&&h.contains(arguments[i],o);i++);i===t&&n.push(o)}}return n},h.difference=function(e){var n=m(i.call(arguments,1),!0,!0,[]);return h.filter(e,function(e){return!h.contains(n,e)})},h.zip=function(e){if(null==e)return[];for(var n=h.max(arguments,"length").length,t=Array(n);n-->0;)t[n]=h.pluck(arguments,n);return t},h.unzip=function(e){return h.zip.apply(null,e)},h.object=function(e,n){if(null==e)return{};for(var t={},r=0,a=e.length;a>r;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t},h.indexOf=function(e,n,t){if(null==e)return-1;var r=0,a=e.length;if(t){if("number"!=typeof t)return r=h.sortedIndex(e,n),e[r]===n?r:-1;r=0>t?Math.max(0,a+t):t}for(;a>r;r++)if(e[r]===n)return r;return-1},h.lastIndexOf=function(e,n,t){if(null==e)return-1;var r=e.length;for("number"==typeof t&&(r=0>t?r+t+1:Math.min(r,t+1));--r>=0;)if(e[r]===n)return r;return-1},h.range=function(e,n,t){arguments.length<=1&&(n=e||0,e=0),t=t||1;for(var r=Math.max(Math.ceil((n-e)/t),0),a=Array(r),o=0;r>o;o++,e+=t)a[o]=e;return a};var y=function(){};h.bind=function(e,n){var t,r;if(d&&e.bind===d)return d.apply(e,i.call(arguments,1));if(!h.isFunction(e))throw new TypeError("Bind must be called on a function");return t=i.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(n,t.concat(i.call(arguments)));y.prototype=e.prototype;var a=new y;y.prototype=null;var o=e.apply(a,t.concat(i.call(arguments)));return h.isObject(o)?o:a}},h.partial=function(e){var n=i.call(arguments,1);return function(){for(var t=0,r=n.slice(),a=0,o=r.length;o>a;a++)r[a]===h&&(r[a]=arguments[t++]);for(;t<arguments.length;)r.push(arguments[t++]);return e.apply(this,r)}},h.bindAll=function(e){var n,t,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(n=1;r>n;n++)t=arguments[n],e[t]=h.bind(e[t],e);return e},h.memoize=function(e,n){var t=function(r){var a=t.cache,o=""+(n?n.apply(this,arguments):r);return h.has(a,o)||(a[o]=e.apply(this,arguments)),a[o]};return t.cache={},t},h.delay=function(e,n){var t=i.call(arguments,2);return setTimeout(function(){return e.apply(null,t)},n)},h.defer=function(e){return h.delay.apply(h,[e,1].concat(i.call(arguments,1)))},h.throttle=function(e,n,t){var r,a,o,i=null,s=0;t||(t={});var c=function(){s=t.leading===!1?0:h.now(),i=null,o=e.apply(r,a),i||(r=a=null)};return function(){var l=h.now();s||t.leading!==!1||(s=l);var u=n-(l-s);return r=this,a=arguments,0>=u||u>n?(i&&(clearTimeout(i),i=null),s=l,o=e.apply(r,a),i||(r=a=null)):i||t.trailing===!1||(i=setTimeout(c,u)),o}},h.debounce=function(e,n,t){var r,a,o,i,s,c=function(){var l=h.now()-i;n>l&&l>=0?r=setTimeout(c,n-l):(r=null,t||(s=e.apply(o,a),r||(o=a=null)))};return function(){o=this,a=arguments,i=h.now();var l=t&&!r;return r||(r=setTimeout(c,n)),l&&(s=e.apply(o,a),o=a=null),s}},h.wrap=function(e,n){return h.partial(n,e)},h.negate=function(e){return function(){return!e.apply(this,arguments)}},h.compose=function(){var e=arguments,n=e.length-1;return function(){for(var t=n,r=e[n].apply(this,arguments);t--;)r=e[t].call(this,r);return r}},h.after=function(e,n){return function(){return--e<1?n.apply(this,arguments):void 0}},h.before=function(e,n){var t;return function(){return--e>0?t=n.apply(this,arguments):n=null,t}},h.once=h.partial(h.before,2);var b=!{toString:null}.propertyIsEnumerable("toString"),k=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];h.keys=function(e){if(!h.isObject(e))return[];if(p)return p(e);var n=[];for(var t in e)h.has(e,t)&&n.push(t);if(b)for(var r=k.length;r--;){var a=k[r];h.has(e,a)&&!h.contains(n,a)&&n.push(a)}return n},h.values=function(e){for(var n=h.keys(e),t=n.length,r=Array(t),a=0;t>a;a++)r[a]=e[n[a]];return r},h.pairs=function(e){for(var n=h.keys(e),t=n.length,r=Array(t),a=0;t>a;a++)r[a]=[n[a],e[n[a]]];return r},h.invert=function(e){for(var n={},t=h.keys(e),r=0,a=t.length;a>r;r++)n[e[t[r]]]=t[r];return n},h.functions=h.methods=function(e){var n=[];for(var t in e)h.isFunction(e[t])&&n.push(t);return n.sort()},h.extend=function(e){if(!h.isObject(e))return e;for(var n,t,r=1,a=arguments.length;a>r;r++){n=arguments[r];for(t in n)e[t]=n[t]}return e},h.pick=function(e,n,t){var r,a={};if(null==e)return a;if(h.isFunction(n)){n=f(n,t);for(r in e){var o=e[r];n(o,r,e)&&(a[r]=o)}}else{var c=s.apply([],i.call(arguments,1));e=new Object(e);for(var l=0,u=c.length;u>l;l++)r=c[l],r in e&&(a[r]=e[r])}return a},h.omit=function(e,n,t){if(h.isFunction(n))n=h.negate(n);else{var r=h.map(s.apply([],i.call(arguments,1)),String);n=function(e,n){return!h.contains(r,n)}}return h.pick(e,n,t)},h.defaults=function(e){if(!h.isObject(e))return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];for(var a in r)void 0===e[a]&&(e[a]=r[a])}return e},h.clone=function(e){return h.isObject(e)?h.isArray(e)?e.slice():h.extend({},e):e},h.tap=function(e,n){return n(e),e};var w=function(e,n,t,r){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof h&&(e=e._wrapped),n instanceof h&&(n=n._wrapped);var a=c.call(e);if(a!==c.call(n))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var o="[object Array]"===a;if(!o){if("object"!=typeof e||"object"!=typeof n)return!1;var i=e.constructor,s=n.constructor;if(i!==s&&!(h.isFunction(i)&&i instanceof i&&h.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in n)return!1}for(var l=t.length;l--;)if(t[l]===e)return r[l]===n;t.push(e),r.push(n);var u,p;if(o){if(u=e.length,p=u===n.length)for(;u--&&(p=w(e[u],n[u],t,r)););}else{var d,f=h.keys(e);if(u=f.length,p=h.keys(n).length===u)for(;u--&&(d=f[u],p=h.has(n,d)&&w(e[d],n[d],t,r)););}return t.pop(),r.pop(),p};h.isEqual=function(e,n){return w(e,n,[],[])},h.isEmpty=function(e){if(null==e)return!0;if(h.isArray(e)||h.isString(e)||h.isArguments(e))return 0===e.length;for(var n in e)if(h.has(e,n))return!1;return!0},h.isElement=function(e){return!(!e||1!==e.nodeType)},h.isArray=u||function(e){return"[object Array]"===c.call(e)},h.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},h.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){h["is"+e]=function(n){return c.call(n)==="[object "+e+"]"}}),h.isArguments(arguments)||(h.isArguments=function(e){return h.has(e,"callee")}),"function"!=typeof/./&&(h.isFunction=function(e){return"function"==typeof e||!1}),h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},h.isNaN=function(e){return h.isNumber(e)&&e!==+e},h.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},h.isNull=function(e){return null===e},h.isUndefined=function(e){return void 0===e},h.has=function(e,n){return null!=e&&l.call(e,n)},h.noConflict=function(){return e._=n,this},h.identity=function(e){return e},h.constant=function(e){return function(){return e}},h.noop=function(){},h.property=function(e){return function(n){return null==n?void 0:n[e]}},h.matches=function(e){var n=h.pairs(e),t=n.length;return function(e){if(null==e)return!t;e=new Object(e);for(var r=0;t>r;r++){var a=n[r],o=a[0];if(a[1]!==e[o]||!(o in e))return!1}return!0}},h.times=function(e,n,t){var r=Array(Math.max(0,e));n=f(n,t,1);for(var a=0;e>a;a++)r[a]=n(a);return r},h.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},h.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=h.invert(x),S=function(e){var n=function(n){return e[n]},t="(?:"+h.keys(e).join("|")+")",r=RegExp(t),a=RegExp(t,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(a,n):e}};h.escape=S(x),h.unescape=S($),h.result=function(e,n,t){var r=null==e?void 0:e[n];return void 0===r?t:h.isFunction(r)?e[n]():r};var _=0;h.uniqueId=function(e){var n=++_+"";return e?e+n:n},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,C=function(e){return"\\"+R[e]};h.template=function(e,n,t){!n&&t&&(n=t),n=h.defaults({},n,h.templateSettings);var r=RegExp([(n.escape||E).source,(n.interpolate||E).source,(n.evaluate||E).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(r,function(n,t,r,i,s){return o+=e.slice(a,s).replace(T,C),a=s+n.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var i=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}var c=function(e){return i.call(this,e,h)},l=n.variable||"obj";return c.source="function("+l+"){\n"+o+"}",c},h.chain=function(e){var n=h(e);return n._chain=!0,n};var A=function(e,n){return e._chain?h(n).chain():n};h.mixin=function(e){h.each(h.functions(e),function(n){var t=h[n]=e[n];h.prototype[n]=function(){var e=[this._wrapped];return o.apply(e,arguments),A(this,t.apply(h,e))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=t[e];h.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],A(this,t)}}),h.each(["concat","join","slice"],function(e){var n=t[e];h.prototype[e]=function(){return A(this,n.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}.call(this),angular.module("ngLocale",[],["$provide",function(e){function n(e){e+="";var n=e.indexOf(".");return-1==n?0:e.length-n-1}function t(e,t){var r=t;void 0===r&&(r=Math.min(n(e),3));var a=Math.pow(10,r),o=(e*a|0)%a;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. H:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"руб.",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ru",pluralCat:function(e,n){var a=0|e,o=t(e,n);return 0==o.v&&a%10==1&&a%100!=11?r.ONE:0==o.v&&a%10>=2&&4>=a%10&&(12>a%100||a%100>14)?r.FEW:0==o.v&&a%10==0||0==o.v&&a%10>=5&&9>=a%10||0==o.v&&a%100>=11&&14>=a%100?r.MANY:r.OTHER}})}]),function(e,n){"use strict";function t(){function e(e,t){return n.extend(new(n.extend(function(){},{prototype:e})),t)}function t(e,n){var t=n.caseInsensitiveMatch,r={originalPath:e,regexp:e},a=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,n,t,r){var o="?"===r?r:null,i="*"===r?r:null;return a.push({name:t,optional:!!o}),n=n||"",""+(o?"":n)+"(?:"+(o?n:"")+(i&&"(.+?)"||"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",t?"i":""),r}var r={};this.when=function(e,a){if(r[e]=n.extend({reloadOnSearch:!0},a,e&&t(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";r[o]=n.extend({redirectTo:e},t(o,a))}return this},this.otherwise=function(e){return this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(t,a,o,i,s,c,l,u){function p(e,n){var t=n.keys,r={};if(!n.regexp)return null;var a=n.regexp.exec(e);if(!a)return null;for(var o=1,i=a.length;i>o;++o){var s=t[o-1],c="string"==typeof a[o]?decodeURIComponent(a[o]):a[o];s&&c&&(r[s.name]=c)}return r}function d(){var e=h(),r=v.current;e&&r&&e.$$route===r.$$route&&n.equals(e.pathParams,r.pathParams)&&!e.reloadOnSearch&&!g?(r.params=e.params,n.copy(r.params,o),t.$broadcast("$routeUpdate",r)):(e||r)&&(g=!1,t.$broadcast("$routeChangeStart",e,r),v.current=e,e&&e.redirectTo&&(n.isString(e.redirectTo)?a.path(f(e.redirectTo,e.params)).search(e.params).replace():a.url(e.redirectTo(e.pathParams,a.path(),a.search())).replace()),i.when(e).then(function(){if(e){var t,r,a=n.extend({},e.resolve);return n.forEach(a,function(e,t){a[t]=n.isString(e)?s.get(e):s.invoke(e)}),n.isDefined(t=e.template)?n.isFunction(t)&&(t=t(e.params)):n.isDefined(r=e.templateUrl)&&(n.isFunction(r)&&(r=r(e.params)),r=u.getTrustedResourceUrl(r),n.isDefined(r)&&(e.loadedTemplateUrl=r,t=c.get(r,{cache:l}).then(function(e){return e.data}))),n.isDefined(t)&&(a.$template=t),i.all(a)}}).then(function(a){e==v.current&&(e&&(e.locals=a,n.copy(e.params,o)),t.$broadcast("$routeChangeSuccess",e,r))},function(n){e==v.current&&t.$broadcast("$routeChangeError",e,r,n)}))}function h(){var t,o;return n.forEach(r,function(r){!o&&(t=p(a.path(),r))&&(o=e(r,{params:n.extend({},a.search(),t),pathParams:t}),o.$$route=r)}),o||r[null]&&e(r[null],{params:{},pathParams:{}})}function f(e,t){var r=[];return n.forEach((e||"").split(":"),function(e,n){if(0===n)r.push(e);else{var a=e.match(/(\w+)(.*)/),o=a[1];r.push(t[o]),r.push(a[2]||""),delete t[o]}}),r.join("")}var g=!1,v={routes:r,reload:function(){g=!0,t.$evalAsync(d)}};return t.$on("$locationChangeSuccess",d),v}]}function r(){this.$get=function(){return{}}}function a(e,t,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,o,i,s,c){function l(){h&&(h.remove(),h=null),p&&(p.$destroy(),p=null),d&&(r.leave(d,function(){h=null}),h=d,d=null)}function u(){var i=e.current&&e.current.locals,s=i&&i.$template;if(n.isDefined(s)){var u=a.$new(),h=e.current,v=c(u,function(e){r.enter(e,null,d||o,function(){!n.isDefined(f)||f&&!a.$eval(f)||t()}),l()});d=v,p=h.scope=u,p.$emit("$viewContentLoaded"),p.$eval(g)}else l()}var p,d,h,f=i.autoscroll,g=i.onload||"";a.$on("$routeChangeSuccess",u),u()}}}function o(e,n,t){return{restrict:"ECA",priority:-400,link:function(r,a){var o=t.current,i=o.locals;a.html(i.$template);var s=e(a.contents());if(o.controller){i.$scope=r;var c=n(o.controller,i);o.controllerAs&&(r[o.controllerAs]=c),a.data("$ngControllerController",c),a.children().data("$ngControllerController",c)}s(r)}}}var i=n.module("ngRoute",["ng"]).provider("$route",t);i.provider("$routeParams",r),i.directive("ngView",a),i.directive("ngView",o),a.$inject=["$route","$anchorScroll","$animate"],o.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,n,t){"use strict";function r(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&s.test("."+e)}function a(e,n){if(!r(n))throw i("badmember",'Dotted member path "@{0}" is invalid.',n);for(var a=n.split("."),o=0,s=a.length;s>o&&e!==t;o++){var c=a[o];e=null!==e?e[c]:t}return e}function o(e,t){t=t||{},n.forEach(t,function(e,n){delete t[n]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r]);return t}var i=n.$$minErr("$resource"),s=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;n.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(e,r){function s(e){return c(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function c(e,n){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,n?"%20":"+")}function l(e,n){this.template=e,this.defaults=n||{},this.urlParams={}}function u(s,c,m){function y(e,n){var t={};return n=f({},c,n),h(n,function(n,r){v(n)&&(n=n()),t[r]=n&&n.charAt&&"@"==n.charAt(0)?a(e,n.substr(1)):n}),t}function b(e){return e.resource}function k(e){o(e||{},this)}var w=new l(s);return m=f({},p,m),h(m,function(a,s){var c=/^(POST|PUT|PATCH)$/i.test(a.method);k[s]=function(s,l,u,p){var m,x,$,S={};switch(arguments.length){case 4:$=p,x=u;case 3:case 2:if(!v(l)){S=s,m=l,x=u;break}if(v(s)){x=s,$=l;break}x=l,$=u;case 1:v(s)?x=s:c?m=s:S=s;break;case 0:break;default:throw i("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var _=this instanceof k,E=_?m:a.isArray?[]:new k(m),R={},T=a.interceptor&&a.interceptor.response||b,C=a.interceptor&&a.interceptor.responseError||t;h(a,function(e,n){"params"!=n&&"isArray"!=n&&"interceptor"!=n&&(R[n]=g(e))}),c&&(R.data=m),w.setUrlParams(R,f({},y(m,a.params||{}),S),a.url);var A=e(R).then(function(e){var t=e.data,r=E.$promise;if(t){if(n.isArray(t)!==!!a.isArray)throw i("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",a.isArray?"array":"object",n.isArray(t)?"array":"object");a.isArray?(E.length=0,h(t,function(e){E.push(new k(e))})):(o(t,E),E.$promise=r)}return E.$resolved=!0,e.resource=E,e},function(e){return E.$resolved=!0,($||d)(e),r.reject(e)});return A=A.then(function(e){var n=T(e);return(x||d)(n,e.headers),n},C),_?A:(E.$promise=A,E.$resolved=!1,E)},k.prototype["$"+s]=function(e,n,t){v(e)&&(t=n,n=e,e={});var r=k[s].call(this,e,this,n,t);return r.$promise||r}}),k.bind=function(e){return u(s,f({},c,e),m)},k}var p={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},d=n.noop,h=n.forEach,f=n.extend,g=n.copy,v=n.isFunction;return l.prototype={setUrlParams:function(e,t,r){var a,o,c=this,l=r||c.template,u=c.urlParams={};h(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]=!0)}),l=l.replace(/\\:/g,":"),t=t||{},h(c.urlParams,function(e,r){a=t.hasOwnProperty(r)?t[r]:c.defaults[r],n.isDefined(a)&&null!==a?(o=s(a),l=l.replace(new RegExp(":"+r+"(\\W|$)","g"),function(e,n){return o+n})):l=l.replace(new RegExp("(/?):"+r+"(\\W|$)","g"),function(e,n,t){return"/"==t.charAt(0)?t:n+t})}),l=l.replace(/\/+$/,"")||"/",l=l.replace(/\/\.(?=\w+($|\?))/,"."),e.url=l.replace(/\/\\\./,"/."),h(t,function(n,t){c.urlParams[t]||(e.params=e.params||{},e.params[t]=n)})}},u}])}(window,window.angular),angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){function t(){var e,t,r,i;for(e in o)c(a[e])&&n.cookies(e,void 0);for(e in a)t=a[e],angular.isString(t)||(t=""+t,a[e]=t),t!==o[e]&&(n.cookies(e,t),i=!0);if(i){i=!1,r=n.cookies();for(e in a)a[e]!==r[e]&&(c(r[e])?delete a[e]:a[e]=r[e],i=!0)}}var r,a={},o={},i=!1,s=angular.copy,c=angular.isUndefined;return n.addPollFn(function(){var t=n.cookies();r!=t&&(r=t,s(t,o),s(t,a),i&&e.$apply())})(),i=!0,e.$watch(t),a}]).factory("$cookieStore",["$cookies",function(e){return{get:function(n){var t=e[n];return t?angular.fromJson(t):t},put:function(n,t){e[n]=angular.toJson(t)},remove:function(n){delete e[n]}}}]);var tryHskControllers=angular.module("tryHskControllers",[]),tryHskDirectives=angular.module("tryHskDirectives",[]),tryHskServices=angular.module("tryHskServices",["ngResource"]),templates=angular.module("templates",[]),tryHsk=angular.module("tryHsk",["ngRoute","ngCookies","templates","tryHskControllers","tryHskFilters","tryHskDirectives","tryHskServices"]);angular.module("templates").run(["$templateCache",function(e){e.put("partials/checkbox/checkbox.html",'<div class=checkboxtree><ul data-role=treeview class=treeview><li class=node><a href=#><span class=node-toggle></span>HSK level</a><ul><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.hsk1><span class=check></span>HSK 1</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.hsk2><span class=check></span>HSK 2</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.hsk3><span class=check></span>HSK 3</label></div></li></ul></li><li class=node><a href=#><span class=node-toggle></span>часть речи</a><ul><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.noun><span class=check></span>существительные</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.pronoun><span class=check></span>числительные</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.verb><span class=check></span>глаголы</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.adjective><span class=check></span>прилагательные</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.numeral><span class=check></span>счётное слово</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.otherPart><span class=check></span>другие</label></div></li></ul></li><li class=node><a href=#><span class=node-toggle></span>Тематические</a><ul><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.place><span class=check></span>Место</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.relate><span class=check></span>Отношения</label></div></li><li><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=checkboxValues.otherThemes><span class=check></span>другие</label></div></li></ul></li></ul></div>'),e.put("partials/info/info.html","<div id=_page_3 ng-controller=InfoController class=frame></div>"),e.put("partials/love/love.html",'<div id=_page_5 ng-controller=LoveController class=frame><div style="height: 100px;"><img style="position: fixed; top: 32px; right: 0; border: 0;" src=https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67 alt="Fork me on GitHub" data-canonical-src=https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png><h1>github.com/tryhsk/tryhsk.github.com</h1><img style="float: left" src=http://cdn.dice.com/wp-content/uploads/2014/02/Open-Source-Logo.png alt="Open source" height=42 width=42><h2 style="margin-left: 50px">Open source</h2></div><h1>База слов в формате google Docs</h1><h3>docs.google.com/spreadsheets/d/1eCcrph6foyjtuQBQxeaZF8ZyrP3EUIE8uiJf3yVISS4/edit?usp=sharing</h3></div>'),e.put("partials/settings/settings.html",'<div id=_page_4 ng-controller=SettingsController class=frame><label><select ng-model=selectLang ng-options="selectLang for selectLang in languages" ng-change=freshLanguage(selectLang)></select></label><div class="grid fluid"><div class=row><div class=span6><div class=row><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.sound><span class=check></span>Произношение</label></div></div><div class=row><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.color><span class=check></span>Расскаска слогов по тонам</label></div></div><div class=row><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.number><span class=check></span>Цифры тонов</label></div></div><div class=row><div data-role=input-control class="input-control checkbox"><label><input type=checkbox ng-model=settings.letter><span class=check></span>Подчёркивания</label></div></div></div><div class=span6><div class="pinyin span3"><span style="font-size: xx-large; color:{{tone.color}}" ng-repeat="tone in example"><span ng-hide=settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></div></div></div></div></div>'),e.put("partials/summary/summary.html",'<div id=_page_2 ng-controller=SummaryController class="frame nbp"><div class=searchSummary></div>Поиск:<input ng-model=query><ng-pluralize count=words.length when="{\'0\': \'Ничего не выбрано\', \'one\': \'Выбрано {} слово\', \'few\': \'Выбрано {} слово\', \'many\': \'Выбрано {} слов\'}"></ng-pluralize><h4>База слов в формате google Docs/Свободное редактирование</h4><h4>docs.google.com/spreadsheets/d/1eCcrph6foyjtuQBQxeaZF8ZyrP3EUIE8uiJf3yVISS4/edit?usp=sharing</h4><div class="grid fluid"><div class=row><div class=span3><div ng-include="\'partials/checkbox/checkbox.html\'"></div></div><div id=table class="span9 tableContainer"><div ng-show=summaryLoader class=summaryLoader><div class=spinner><div class=rect1></div><div class=rect2></div><div class=rect3></div><div class=rect4></div><div class=rect5></div></div></div><table class=table><thead class=fixedHeader><div class=row><div class="text-left span3"><a ng-click="predicate = \'id\'; reverse=false">Иероглиф{{language.char}}</a>(<a ng-click="predicate = \'-id\'; reverse=false">^</a>)</div><div class="text-left span3"><a ng-click="predicate = \'s\'; reverse=!reverse">Пиньинь{{language.pinyin}}</a></div><div class="text-left span3"><a ng-click="predicate = \'russian\'; reverse=!reverse">Русский{{language.translate}}</a></div><div style="display: none" class="text-left span3"><a ng-click="predicate = \'english\'; reverse=!reverse">Английский{{language.eng}}</a></div></div></thead><tbody class=scrollContent><div class=zoneSummary><div ng-class=row ng-repeat="word in words | filter:query | orderBy:predicate:reverse"><div class="char char_big span3">{{word.id}} {{word.char}}</div><div class="pinyin span3"><span style=color:{{tone.colorStyle}} ng-repeat="tone in word.pinyin"><span ng-show=!settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></div><div class="russian span6">{{word.russian}}</div></div></div></tbody></table></div></div></div></div>'),e.put("partials/test/test.html","<div id=_page_1 ng-controller=TestController class=\"frame nbp\"><h1 ng-show=answer class=classCurrentRights>{{currentRights}}</h1><label><select ng-model=select ng-options=\"select for select in regimes\"></select></label><div class=\"grid fluid\"><div class=row><div class=span9><div class=\"row ntm\"><div id=sound></div><button ng-class=class_button_next ng-click=nextWord() class=\"button padding20\">{{button_next}}<i ng-show=showSpin class=icon-spin></i></button><output id=value class=padding10></output><ng-pluralize count=words.length when=\"{'0': 'Ничего не выбрано', '1': 'Слишком мало слов. Выбрано {} слово', '2': 'Слишком мало слов. Выбрано {} слова', '3': 'Слишком мало слов. Выбрано {} слова', '4': 'Слишком мало слов. Выбрано {} слова', '5': 'Слишком мало слов. Выбрано {} слов', '6': 'Слишком мало слов. Выбрано {} слов', '7': 'Слишком мало слов. Выбрано {} слов', '8': 'Слишком мало слов. Выбрано {} слов', '9': 'Слишком мало слов. Выбрано {} слов', 'one': 'Выбрано {} слово', 'few': 'Выбрано {} слово', 'many': 'Выбрано {} слов'}\"></ng-pluralize><center><button ng-show=\"soundCharRegime || soundTranslateRegime\" ng-click=playSound() class=\"shortcut link buttonSound\"><i class=icon-volume-5></i></button><button ng-show=charRegime ng-style=questionStyle ng-click=playSound() class=\"shortcut link font60\">{{char}}</button><div ng-show=translateRegime class=\"russian-char font20\">{{russian}}</div></center></div><div class=row><div data-role=accordion data-closeany=true class=\"accordion place-center test\"><div ng-repeat=\"wordsTest in wordsTests\" class=accordion-frame><a href=# ng-click=isRight(wordsTest.ansv) ng-style=variantStyle class=heading>{{wordsTest.main}}</a><div class=content><div class=\"grid no-margin\"><div ng-show=\"charRegime || soundCharRegime\" class=\"row no-margin\"><audio ngsrc={{wordsTest.sound}}></audio><div class=span4><h2>{{wordsTest.char}}</h2></div><div class=span6><h2><span style=color:{{tone.color}} ng-repeat=\"tone in wordsTest.pinyin\"><span ng-hide=settings.letter>{{tone.pinyin}}</span><span ng-show=settings.letter>{{tone.transpinyin}}</span><span ng-show=settings.number>{{tone.number}}</span></span></h2></div></div><div ng-show=\"translateRegime || soundTranslateRegime\" class=\"row no-margin\"><h4>{{wordsTest.russian}}</h4></div><div class=\"row no-margin\"><button ng-class=wordsTest.ansver ng-click=nextWord() class=button>{{wordsTest.button}}</button></div></div></div></div></div></div></div><div class=span3><div ng-include=\"'partials/checkbox/checkbox.html'\"></div></div></div></div></div>")
}]),tryHskServices.service("checkboxValues",["$cookies","$rootScope",function(e,n){this.initCheckboxValues=function(){n.checkboxValues=void 0===e.checkboxValues?{hsk1:!0,hsk2:!0,hsk3:!0,verb:!0,numeral:!0,adjective:!0,pronoun:!0,place:!0,relate:!0,noun:!0,otherPart:!0,otherThemes:!0}:JSON.parse(e.checkboxValues)},this.refreshCheckboxValues=function(){e.checkboxValues=JSON.stringify(n.checkboxValues)}}]),tryHskServices.service("settings",["$cookies","$rootScope",function(e,n){this.initSettings=function(){n.settings=void 0===e.settings?{sound:!0,color:!1,letter:!0,number:!1}:JSON.parse(e.settings)},this.refreshSettings=function(){e.settings=JSON.stringify(n.settings)}}]),tryHskServices.service("language",["$cookies","$rootScope",function(e,n){this.getLanguage=function(e){switch(e){case"Русский":n.content={test:"ТЕСТ",summary:"СЛОВАРЬ",search:"Поиск",select:"Выберите язык","char":"Иероглиф",pinyin:"Пиньинь",translate:"Перевод",eng:"Английский"};break;case"汉语":n.content={test:"__ТЕСТ__",summary:"__СЛОВАРЬ__",search:"搜索",select:"选择语言","char":"字",pinyin:"拼音",translate:"俄语",eng:"英语"};break;case"English":n.content={test:"TEST",summary:"SUMMARY",search:"Search",select:"Choose language","char":"Hieroglyph",pinyin:"Pinyin",translate:"Russian",eng:"English"}}},this.initLanguage=function(){return void 0===e.language?"Русский":JSON.parse(e.language).selectLanguage},this.refreshSelectlanguage=function(n){var t={selectLanguage:n};e.language=JSON.stringify(t)}}]),tryHskServices.service("score",[function(){this.answered=!1,this.count=0,this.isRight=function(e){!this.answered&&e&&(this.count=this.count?++this.count:1),this.answered=!0}}]),tryHskServices.factory("StateManager",["$rootScope",function(e){var n=[];return{add:function(t){n.push(t),e.globalLoader=!0},remove:function(t){n=_.without(n,t),0===n.length&&(e.globalLoader=!1)},getByName:function(e){return _.include(n,e)},clear:function(){return n.length=0,!0}}}]),tryHskServices.factory("SummaryStateManager",["$rootScope",function(e){var n=[];return{add:function(t){n.push(t),e.summaryLoader=!0},remove:function(t){n=_.without(n,t),0===n.length&&(e.summaryLoader=!1)},getByName:function(e){return _.include(n,e)},clear:function(){return n.length=0,!0}}}]),tryHskServices.factory("Word",["$resource",function(e){return e("words_.json",{},{query:{method:"GET",isArray:!0,cash:!0}})}]),tryHskServices.service("prepareWords",["Word","pinyin",function(e,n){this.getWords=function(){return e.query().$promise.then(function(e){for(var t,r=[],a=e.length,o=0;a>o;o++)t={},t["char"]=e[o].c,t.pinyin=n.processingOfPinyin(e[o].p),t.russian=e[o].r,t.sound="http://china-standart.ru/"+e[o].s,t.mask=parseInt(e[o].i,2),t.id=o,r.push(t);return r})}}]),tryHskServices.service("sortWords",["$q","prepareWords","$rootScope","checkboxValues",function(e,n,t,r){this.words=[],this.loaded=!1,this.getSortWords=function(){var a,o=this;return this.loaded||r.initCheckboxValues(),t.$watch("checkboxValues",function(e,n){e!==n&&(o.getSortWords(),r.refreshCheckboxValues())},!0),this.loaded?(a=e.defer(),a.resolve(o.sortWords(o.words)),a.promise):(this.loaded=!0,n.getWords().then(function(e){return o.sortWords(e)}))},this.sortWords=function(e){function n(e){for(var n=[],r=e.length,a=0;r>a;a++)t.checkboxValues.hsk3&&4&e[a].mask?n.push(a):t.checkboxValues.hsk1&&1&e[a].mask?n.push(a):t.checkboxValues.hsk2&&2&e[a].mask&&n.push(a);return n}function r(n){for(var r=[],a=n.length,o=0;a>o;o++)t.checkboxValues.noun&&8&e[n[o]].mask?r.push(n[o]):t.checkboxValues.verb&&16&e[n[o]].mask?r.push(n[o]):t.checkboxValues.adjective&&32&e[n[o]].mask?r.push(n[o]):t.checkboxValues.numeral&&64&e[n[o]].mask?r.push(n[o]):t.checkboxValues.pronoun&&128&e[n[o]].mask?r.push(n[o]):!t.checkboxValues.otherPart||248&e[n[o]].mask||r.push(n[o]);return r}function a(n){for(var r=[],a=n.length,o=0;a>o;o++)t.checkboxValues.place&&256&e[n[o]].mask?r.push(n[o]):t.checkboxValues.relate&&512&e[n[o]].mask?r.push(n[o]):!t.checkboxValues.otherThemes||768&e[n[o]].mask||r.push(n[o]);return r}function o(n){for(var t=[],r=0;r<n.length;r++)t.push(e[n[r]]);return t}return this.words=e,t.words=o(a(r(n(e)))),t.words}}]),tryHskServices.service("pinyin",[function(){this.processingOfPinyin=function(e){var n,t,r=[],a={},o=[];n=e.split(/\d/),n.length>1&&n.pop(),t=e.split(/[^0-9]/);for(var i=0;i<t.length;i++)t[i]&&r.push(t[i]);0==r.length&&(r=["ERROR"]);for(var s=0;s<n.length;s++){switch(a={},r[s]){case"1":a={number:"1",color:"blue"};break;case"2":a={number:"2",color:"orange"};break;case"3":a={number:"3",color:"green"};break;case"4":a={number:"4",color:"red"};break;case"0":a={number:"5",color:"gray"};break;default:a={number:"ERROR",color:"black"}}a.transpinyin=n[s],a.pinyin=this.filterLetter(a.transpinyin),o.push(a)}return o},this.filterLetter=function(e){var n,t;n=e.split(""),t=n.length;for(var r=0;t>r;r++)switch(n[r]){case"ā":n[r]="a";break;case"á":n[r]="a";break;case"ǎ":n[r]="a";break;case"à":n[r]="a";break;case"ē":n[r]="e";break;case"é":n[r]="e";break;case"ě":n[r]="e";break;case"è":n[r]="e";break;case"ī":n[r]="i";break;case"í":n[r]="i";break;case"ǐ":n[r]="i";break;case"ì":n[r]="i";break;case"ō":n[r]="o";break;case"ó":n[r]="o";break;case"ǒ":n[r]="o";break;case"ò":n[r]="o";break;case"ū":n[r]="u";break;case"ú":n[r]="u";break;case"ǔ":n[r]="u";break;case"ù":n[r]="u";break;case"ǚ":n[r]="u";break;case"ǜ":n[r]="u"}return n.join("")}}]),angular.module("tryHskFilters",[]).filter("HSK",function(){return function(e){return console.log("yes"),e?"✓":"✘"}}),tryHskControllers.controller("CheckboxController",["$scope","$rootScope","checkboxValues",function(){}]),tryHskControllers.controller("InfoController",["$scope","$rootScope",function(){}]),tryHskControllers.controller("LoveController",["$scope","$rootScope",function(){}]),tryHskControllers.controller("SettingsController",["$scope","$rootScope","language","settings",function(e,n,t,r){e.languages=["Русский","汉语","English"],e.selectLang=t.initLanguage(t),t.getLanguage(e.selectLang),e.freshLanguage=function(e){t.refreshSelectlanguage(e)},r.initSettings(),e.$watch("settings",function(){r.refreshSettings()},!0)}]),tryHskControllers.controller("SummaryController",["$scope","$rootScope","SummaryStateManager",function(e,n,t){function r(r,a){if(r!==a){t.add("summary");for(var o=n.words,i=0;i<o.length;i++)for(var s=0;s<o[i].pinyin.length;s++)o[i].pinyin[s].colorStyle=n.settings.color?o[i].pinyin[s].color:"black";e.words=o,o=null,t.remove("summary")}}n.$watch("words",r,!0),n.$watch("settings.color",r),e.predicate="id"}]),tryHskControllers.controller("TestController",["$scope","$rootScope","sortWords","$timeout","StateManager","score",function(e,n,t,r,a,o){function i(e){return Math.floor(Math.random()*(e.length-1))}function s(e){d=i(e);var n=!0,t=Math.floor(.85*e.length);do for(var r=0;t>r;r++){if(d==h[r]){d=i(e),n=!0;break}n=!1}while(n);return h.unshift(d),d}function c(e){var n=function(){for(var n=[d,i(e),i(e),i(e)],t=0;4>t;t++)for(var r=0;4>r;r++)t==r||n[t]==n[r]&&(n[t]=i(e));return n}();g=_.shuffle(n)}function l(){var n=["❤","☀","♞","☭"];e["char"]="☯";for(var t=0;4>t;t++)f[t]["char"]=n[t],f[t].pinyin="☀",f[t].russian="♞",f[t].sound="",f[t].ansver="primary",f[t].button="лол!!!"}function u(t){for(var r=0;4>r;r++){if(f[r]["char"]=t[g[r]]["char"],f[r].pinyin=t[g[r]].pinyin,!n.settings.color)for(var a=0;a<f[r].pinyin.length;a++)f[r].pinyin[a].color="black";f[r].russian=t[g[r]].russian,("произношение - перевод"===e.select||"иероглиф - перевод"===e.select)&&(f[r].main=t[g[r]].russian),("перевод - иероглиф"===e.select||"произношение - иероглиф"===e.select)&&(f[r].main=t[g[r]]["char"]),f[r].sound=t[g[r]].sound,f[r].id=t[g[r]].id,g[r]==d?(f[r].ansver="success",f[r].ansv=!0,f[r].button="Молодец!"):(f[r].ansver="danger",f[r].ansv=!1,f[r].button="Всё получится!")}}function p(n,t){n!==t&&(e.button_next="ОБНОВИТЬ",e.class_button_next="warning",e.showSpin=!0,h=new Array(10))}var d,h=[],f=[{},{},{},{}],g=(document.getElementById("russian_char"),document.getElementById("sound_test"),[]);e.currentRights=0,a.add("test"),e.regimes=["иероглиф - перевод","перевод - иероглиф","произношение - перевод","произношение - иероглиф"],e.select=e.regimes[0],e.$watch("select",p,!0),n.$watch("checkboxValues",p,!0),e.isRight=function(n){o.isRight(n),o.count&&(e.answer=!0,e.currentRights=o.count)},e.playSound=function(){return document.getElementById("playSound").play(),!1},e.fill=function(){var t=n.words;switch($("div.content").css("display","none").css("border",""),s(t),e.questionStyle=1==t[d]["char"].length?{width:"92px"}:{width:80*t[d]["char"].length+"px"},e["char"]=t[d]["char"],e.russian=t[d].russian,e.select){case"иероглиф - перевод":e.charRegime=!0,e.translateRegime=!1,e.soundCharRegime=!1,e.soundTranslateRegime=!1;break;case"перевод - иероглиф":e.charRegime=!1,e.translateRegime=!0,e.soundCharRegime=!1,e.soundTranslateRegime=!1;break;case"произношение - перевод":e.charRegime=!1,e.translateRegime=!1,e.soundCharRegime=!0,e.soundTranslateRegime=!1,document.getElementById("playSound").play();break;case"произношение - иероглиф":e.charRegime=!1,e.translateRegime=!1,e.soundCharRegime=!1,e.soundTranslateRegime=!0,document.getElementById("playSound").play()}return e.variantStyle=e.charRegime||e.soundCharRegime?"":{"font-size":"40px"},e.sound=t[d].sound,c(t),u(t),setTimeout(function(){$("div.content:has(button.success)").css("border","2px solid #60a917"),$("div.content:has(button.danger)").css("border","2px solid red")},500),f},e.nextWord=function(){o.answered=!1,e.showSpin=!1,e.button_next="СЛЕДУЮЩИЙ",e.class_button_next="info",n.words.length<10?l():(e.fill(),r(function(){document.getElementById("sound").innerHTML=n.settings.sound||"произношение - перевод"===e.select||"произношение - иероглиф"===e.select?'<audio id="playSound" src="'+e.sound+'" autoplay ></audio>':'<audio id="playSound" src="'+e.sound+'"></audio>'},100))},function(){t.getSortWords().then(function(){e.nextWord(),e.wordsTests=f,a.remove("test")})}()}]);